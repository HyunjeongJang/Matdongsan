<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">
    <resultMap type="QBoard" id="qBoardResultSet">
        <result column="QNA_BNO" property="qnaBno"/>
        <result column="MEMBER_NO" property="qnaWriter"/>
        <result column="P_BNO" property="pBno"/>
        <result column="QNA_TITLE" property="qnaTitle"/>
        <result column="QNA_CONTENT" property="qnaContent"/>
        <result column="QNA_DATE" property="qnaDate"/>
        <result column="COUNT" property="count"/>
        <result column="STATUS" property="status"/>
        <result column="QNA_AREA" property="qnaArea"/>
    </resultMap>

    <resultMap type="FBoard" id="fBoardResultSet">
        <result column="FREE_BNO" property="freeBno"/>
        <result column="MEMBER_NO" property="freeWriter"/>
        <result column="BOARD_TITLE" property="boardTitle"/>
        <result column="BOARD_WRITER" property="boardWriter"/>
        <result column="BOARD_CONTENT" property="boardContent"/>
        <result column="BOARD_DATE" property="boardDate"/>
        <result column="BOARD_AREA" property="boardArea"/>
        <result column="STATUS" property="status"/>
    </resultMap>



    <select id="selectList" resultMap="qBoardResultSet">
            SELECT
                QNA_BNO,
                MEMBER_NO,
                P_BNO,
                QNA_TITLE,
                QNA_CONTENT,
                QNA_DATE
            FROM QNA_BOARD
            WHERE STATUS = 'Y'
            ORDER BY QNA_DATE DESC;
    </select>

    <select id="selectListCount" resultType="int">
        SELECT COUNT(*)
        FROM QNA_BOARD
        WHERE STATUS = 'Y';
    </select>

    <insert id="insertQnaBoard">
        INSERT INTO QNA_BOARD(QNA_BNO,MEMBER_NO,QNA_TITLE,QNA_CONTENT,QNA_DATE,QNA_AREA)
        VALUES(SEQ_BNO.NEXTVAL,
               MEMBER_NO = #{use_no},
               QNA_TITLE = #{qnaTitle},
               QNA_CONTENT = #{qnaContent},
               QNA_DATE = #{sysdate},
               QNA_AREA =#{qnaArea}
               )
    </insert>
    <select id="searchList" resultMap="qBoardResultSet">
        QNA_BNO,
        MEMBER_NO,
        P_BNO,
        QNA_TITLE,
        QNA_CONTENT,
        QNA_DATE
        FROM QNA_BOARD
        WHERE STATUS='Y'
        <if test='keyword != null and keyword != ""'>
            AND
            <choose>
                <when test="condition == 'qnaTitle'">
                    QNA_TITLE LIKE '%${keyword}%'
                </when>

                <when test="condition == 'qnaContent'">
                    QNA_CONTENT LIKE '%${keyword}%'
                </when>
            </choose>
        </if>
        ORDER BY QNA_DATE DESC
    </select>
</mapper>

